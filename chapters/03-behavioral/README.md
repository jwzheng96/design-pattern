# 第三部分：行为型模式 (Behavioral Patterns)

[← 返回目录](../../README.md)

---

## 概述

行为型模式关注**对象之间的通信**，描述类或对象怎样交互和分配职责。这些模式帮助你：

- **解耦对象**：减少对象之间的直接依赖
- **灵活分配职责**：动态改变对象的行为
- **简化复杂的控制流程**：将复杂的行为分解

### 行为型模式的两种类型

1. **类行为型模式**：使用继承在类之间分配行为（模板方法、解释器）
2. **对象行为型模式**：使用对象组合来分配行为（其他模式）

---

## 本部分包含的模式

| 模式 | 核心思想 | 适用场景 |
|-----|---------|---------|
| [责任链](chain-of-responsibility/README.md) | 请求沿链传递 | 多级审批、中间件 |
| [命令](command/README.md) | 封装请求为对象 | 撤销/重做、任务队列 |
| [迭代器](iterator/README.md) | 顺序访问元素 | 集合遍历 |
| [中介者](mediator/README.md) | 封装对象交互 | GUI组件通信、聊天室 |
| [备忘录](memento/README.md) | 保存/恢复状态 | 撤销功能、快照 |
| [观察者](observer/README.md) | 状态变化通知 | 事件系统、数据绑定 |
| [状态](state/README.md) | 状态驱动行为 | 状态机、工作流 |
| [策略](strategy/README.md) | 封装算法族 | 支付方式、排序算法 |
| [模板方法](template-method/README.md) | 定义算法骨架 | 框架设计 |
| [访问者](visitor/README.md) | 分离操作与结构 | 编译器、报表生成 |
| [解释器](interpreter/README.md) | 解释语法 | DSL、表达式求值 |

---

## 模式对比

```
┌────────────────────────────────────────────────────────────────────┐
│                       行为型模式关系图                              │
├────────────────────────────────────────────────────────────────────┤
│                                                                    │
│   ┌─────────┐                    ┌─────────┐                      │
│   │ 策略    │ ◄─── 算法封装 ───► │ 状态    │                      │
│   └─────────┘                    └─────────┘                      │
│       │                              │                            │
│       │ 类似               状态驱动的行为                          │
│       ▼                              ▼                            │
│   ┌─────────┐                    ┌─────────┐                      │
│   │ 命令    │ ◄─── 请求封装 ───► │ 备忘录  │                      │
│   └─────────┘                    └─────────┘                      │
│       │                              │                            │
│   可撤销操作                     保存/恢复状态                      │
│       │                              │                            │
│       ▼                              ▼                            │
│   ┌─────────┐                    ┌─────────┐                      │
│   │ 责任链  │ ◄─── 处理请求 ───► │ 中介者  │                      │
│   └─────────┘                    └─────────┘                      │
│                                                                    │
│   ┌─────────┐                    ┌─────────┐                      │
│   │ 观察者  │ ◄─── 通知机制 ───► │ 访问者  │                      │
│   └─────────┘                    └─────────┘                      │
│                                                                    │
└────────────────────────────────────────────────────────────────────┘
```

---

## 如何选择？

```
遇到行为问题？
│
├─ 需要让多个对象都有机会处理请求？
│   └─ 是 → 【责任链模式】
│
├─ 需要将请求封装成对象（支持撤销/排队）？
│   └─ 是 → 【命令模式】
│
├─ 需要遍历集合而不暴露内部结构？
│   └─ 是 → 【迭代器模式】
│
├─ 需要减少对象之间的直接依赖？
│   └─ 是 → 【中介者模式】
│
├─ 需要保存对象状态以便恢复？
│   └─ 是 → 【备忘录模式】
│
├─ 需要对象状态改变时通知其他对象？
│   └─ 是 → 【观察者模式】
│
├─ 对象行为取决于其状态？
│   └─ 是 → 【状态模式】
│
├─ 需要在运行时切换算法？
│   └─ 是 → 【策略模式】
│
├─ 多个子类有相同的算法结构但部分步骤不同？
│   └─ 是 → 【模板方法模式】
│
├─ 需要对对象结构添加新操作而不修改类？
│   └─ 是 → 【访问者模式】
│
└─ 需要解释/执行特定语法？
    └─ 是 → 【解释器模式】
```

---

## 开始学习

建议按以下顺序学习（从常用到不常用）：

1. [观察者模式](observer/README.md) - 非常常用
2. [策略模式](strategy/README.md) - 非常实用
3. [命令模式](command/README.md) - 很多应用场景
4. [责任链模式](chain-of-responsibility/README.md) - 中间件必备
5. [状态模式](state/README.md) - 状态机设计
6. [模板方法模式](template-method/README.md) - 框架设计基础
7. [迭代器模式](iterator/README.md) - 已内置于语言
8. [备忘录模式](memento/README.md) - 撤销功能
9. [中介者模式](mediator/README.md) - 解耦组件
10. [访问者模式](visitor/README.md) - 较复杂
11. [解释器模式](interpreter/README.md) - 特殊场景

---

[← 返回目录](../../README.md) | [开始学习：责任链模式 →](chain-of-responsibility/README.md)

